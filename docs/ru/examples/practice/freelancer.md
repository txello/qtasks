# –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è QTasks –¥–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–∞

–§—Ä–µ–π–º–≤–æ—Ä–∫ QTasks –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–º –≤–∞–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å
–∑–∞–¥–∞—á–∏, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö API –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö. –ù–∏–∂–µ
–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä, –∫–∞–∫ —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å QTasks –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
—Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.

---

## üíº –°—Ü–µ–Ω–∞—Ä–∏–π

–î–æ–ø—É—Å—Ç–∏–º, –≤—ã —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä, —Å–æ–∑–¥–∞—é—â–∏–π Telegram-–±–æ—Ç–∞ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω:

1. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.
2. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤ —Å API –∫–ª–∏–µ–Ω—Ç–∞.
3. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏ –æ—à–∏–±–∫–∏.

–í—ã —Ö–æ—Ç–∏—Ç–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç—Ç–∏ –∑–∞–¥–∞—á–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –∏ –≤ —Ñ–æ–Ω–µ, –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç
—Ç—è–∂—ë–ª—ã—Ö —Ä–µ—à–µ–Ω–∏–π –≤—Ä–æ–¥–µ Celery.

---

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```python
from qtasks.asyncio import QueueTasks
from qtasks.registries import AsyncTask
import logging

app = QueueTasks()
app.config.logs_default_level = logging.INFO
```

---

## ‚è∞ –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏

```python
@app.task(name="send_reminder")
async def send_reminder(chat_id: int, text: str):
    await telegram_api.send_message(chat_id, text)
```

–ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ç–∞–π–º–µ—Ä–æ–≤:

```python
from qtasks.timers import AsyncTimer
from apscheduler.triggers.cron import CronTrigger

# –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ app —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

timer = AsyncTimer(app=app)
timer.add_task("send_reminder", trigger=CronTrigger(minute="*/1"),
args=(123456789, "–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–æ –∑–∞–∫–∞–∑!"))

timer.run_forever()
```

---

## üì¶ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫–∞–∑–æ–≤

```python
@app.task(name="check_orders", echo=True)
async def check_orders(self: AsyncTask):
    orders = await external_api.get_orders()
    for order in orders:
        if order.status == "delivered":
            await self.add_task(
                "send_reminder",
                order.user_id,
                "–í–∞—à –∑–∞–∫–∞–∑ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω!"
            )
```

---

## üìã –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

```python
@app.task(name="error_logger")
def error_logger(message: str):
    with open("errors.log", "a") as f:
        f.write(message + "\n")
```

–í–æ –≤—Å–µ—Ö –∑–∞–¥–∞—á–∞—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```python
try:
    ...
except Exception as e:
    await self.add_task("error_logger", args=(str(e),))
```

---

## üß© –ü–æ—á–µ–º—É QTasks —É–¥–æ–±–µ–Ω –¥–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–∞?

* –ù–µ —Ç—Ä–µ–±—É–µ—Ç Redis –∏–ª–∏ RabbitMQ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
* –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å —á–µ—Ä–µ–∑ `python main.py`, –±–µ–∑ –¥–æ–∫–µ—Ä–æ–≤ –∏ –º–∏–≥—Ä–∞—Ü–∏–π.
* –ì–∏–±–∫–æ—Å—Ç—å: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å retry, middleware, –∫–∞—Å—Ç–æ–º–Ω—ã–µ executor'—ã.
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `yield`, `echo`, –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –º–æ—â–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.
–ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –±–æ—Ç–æ–≤ –∏ API-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π ‚Äî —Ç–∏–ø–∏—á–Ω–æ–π —Å—Ä–µ–¥—ã —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–∞.
