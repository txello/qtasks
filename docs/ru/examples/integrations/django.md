# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ `QTasks` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–¥–Ω–∞ –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
—Å Django: **`autodiscover_tasks`**.

---

## üìå –ß—Ç–æ –¥–µ–ª–∞–µ—Ç autodiscover\_tasks?

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `tasks.py`) –∏–∑
–≤—Å–µ—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –≤ `INSTALLED_APPS`.
–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∑–∞–¥–∞—á–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ QTasks –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä—É—á–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

–°–∏–≥–Ω–∞—Ç—É—Ä–∞ —Ñ—É–Ω–∫—Ü–∏–∏:

```python
def autodiscover_tasks(app, modules: List[str] = ["tasks"]):
    """–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏–∑ –≤—Å–µ—Ö INSTALLED_APPS,
    —á—Ç–æ–±—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –≤ QTasks.

    Args:
        app (QueueTasks): –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
        modules (List[str]): –ú–æ–¥—É–ª–∏ –¥–ª—è –∞–≤—Ç–æ–¥–∏—Å–∫–∞–≤–µ—Ä–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: ["tasks"].
    """
```

üìñ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –≤ [API ‚Üí autodiscover\_tasks](/qtasks/ru/api/libraries/django/).

---

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

–í `settings.py`:

```python
INSTALLED_APPS = [
    "django.contrib.admin",
    "django.contrib.auth",
    "myapp",  # –∑–¥–µ—Å—å –±—É–¥–µ—Ç tasks.py
]
```

–í `myapp/tasks.py`:

```python
from qtasks import QueueTasks

app = QueueTasks()

@app.task
def hello(name: str):
    return f"Hello, {name}!"
```

–í `manage.py` –∏–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–º –º–æ–¥—É–ª–µ –ø—Ä–æ–µ–∫—Ç–∞:

```python
from qtasks.contrib.django import autodiscover_tasks
from qtasks import QueueTasks

app = QueueTasks()
autodiscover_tasks(app)
```

–ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `autodiscover_tasks(app)` –≤—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ `tasks.py` –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

---

## ‚úÖ –ò—Ç–æ–≥–∏

* `autodiscover_tasks` –∏—â–µ—Ç `tasks.py` (–∏–ª–∏ –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã) –≤–æ –≤—Å–µ—Ö
–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö `INSTALLED_APPS`.
* –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é QTasks –≤ –ø—Ä–æ–µ–∫—Ç—ã Django.
* –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏—Ö –≤ `tasks.py` –≤–Ω—É—Ç—Ä–∏
–∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
