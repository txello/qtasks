# –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –ø–ª–∞–≥–∏–Ω–æ–≤

QTasks –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–∏–±–∫–∏–π –º–µ—Ö–∞–Ω–∏–∑–º –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –ø–ª–∞–≥–∏–Ω–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–∏—Å—Ç–µ–º—ã
—Ç—Ä–∏–≥–≥–µ—Ä–æ–≤. –≠—Ç–∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç:

* –ò–∑–º–µ–Ω—è—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∑–∞–¥–∞—á
* –ó–∞–º–µ–Ω—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
* –†–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è –±–µ–∑ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –≤ –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É

## üìò –ü—Ä–∞–≤–∏–ª–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

* –®–∞–±–ª–æ–Ω: `{–∫–æ–º–ø–æ–Ω–µ–Ω—Ç}_{—Ñ—É–Ω–∫—Ü–∏—è}_{–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ}`
* –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `QueueTasks` –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –∫–∞–∫ `qtasks`
* –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: –ø–µ—Ä–≤—ã–º –≤—Å–µ–≥–¥–∞ –∏–¥—ë—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `self`), –¥–∞–ª–µ–µ ‚Äî
—Å–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## üìå –ü–æ–≤–µ–¥–µ–Ω–∏–µ `return`

* `new_args` / `new_model` / `new_data` / `new_result` –∑–∞–º–µ–Ω—è—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ
–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –µ—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
* –ï—Å–ª–∏ `return` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ `None`, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
* –°–ª–µ–¥—É—é—â–∏–π –ø–ª–∞–≥–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ. –ï—Å–ª–∏ —É –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–ª–∞–≥–∏–Ω–∞
—Ä–µ–∑—É–ª—å—Ç–∞—Ç - `None`, —Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∏–ª–∏ —Å–∞–º–æ–µ –ø–µ—Ä–≤–æ–µ.
* –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å—Ä–∞–±–æ—Ç–∞–≤—à–∏–π –ø–ª–∞–≥–∏–Ω –∏–º–µ–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞ –∑–∞–º–µ–Ω—É

–ü—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ `new_args`, —Ç–æ –≤ –Ω—ë–º —Ö—Ä–∞–Ω–∏—Ç—Å—è `{"args": (123,), "kw": {"test": 123}}`.
–ï—Å–ª–∏ –æ–¥–∏–Ω –∏–∑ –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–∞–≤–µ–Ω `None`, —Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ª–æ–≥–∏–∫–∞ –≤—ã—à–µ.

---

## üî∑ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üîπ QueueTasks (`qtasks`)

| –¢—Ä–∏–≥–≥–µ—Ä                         | Return             | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                    |
| ------------------------------- | ------------------ | --------------------------------------------- |
| `qtasks_add_task_before_broker` | `new_args: dict`   | –ó–∞–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—á–∏ –¥–æ –ø–µ—Ä–µ–¥–∞—á–∏ –±—Ä–æ–∫–µ—Ä—É |
| `qtasks_add_task_after_broker`  | ‚Äî                  | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–¥–∞—á–∏ –∑–∞–¥–∞—á–∏ –±—Ä–æ–∫–µ—Ä—É      |
| `qtasks_get`                    | `new_result: Task` | –ó–∞–º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞—á–∏           |
| `qtasks_stop`                   | ‚Äî                  | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è           |
| `qtasks_ping`                   | ‚Äî                  | –ü–∏–Ω–≥—É–µ—Ç global\_config                        |
| `qtasks_flush_all`              | ‚Äî                  | –°–±—Ä–æ—Å –æ—á–µ—Ä–µ–¥–µ–π –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â                     |

### üîπ Broker

| –¢—Ä–∏–≥–≥–µ—Ä                       | Return                           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                      |
| ----------------------------- | -------------------------------- | ----------------------------------------------- |
| `broker_listen_start`         | ‚Äî                                | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è                     |
| `broker_add_worker`           | `new_args: dict`                 | –ó–∞–º–µ–Ω—è–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—á–∏ –¥–ª—è –≤–æ—Ä–∫–µ—Ä–∞   |
| `broker_add_before`           | `new_model: TaskStatusNewSchema` | –ó–∞–º–µ–Ω—è–µ—Ç –º–æ–¥–µ–ª—å –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å—å—é –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ       |
| `broker_add_after`            | ‚Äî                                | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ         |
| `broker_get`                  | `new_task: Task`                 | –ó–∞–º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞—á–∏             |
| `broker_update`               | `new_kw: dict`                   | –ó–∞–º–µ–Ω—è–µ—Ç kwargs –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏           |
| `broker_start`                | ‚Äî                                | –ó–∞–ø—É—Å–∫ –±—Ä–æ–∫–µ—Ä–∞                                  |
| `broker_stop`                 | ‚Äî                                | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±—Ä–æ–∫–µ—Ä–∞                               |
| `broker_remove_finished_task` | `new_model`                      | –ó–∞–º–µ–Ω—è–µ—Ç –º–æ–¥–µ–ª—å –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ |
| `broker_running_older_tasks`  | ‚Äî                                | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ä—ã—Ö –∑–∞–¥–∞—á      |
| `broker_flush_all`            | ‚Äî                                | –°–±—Ä–æ—Å –æ—á–µ—Ä–µ–¥–µ–π                                  |

### üîπ GlobalConfig

| –¢—Ä–∏–≥–≥–µ—Ä                    | Return           | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                   |
| -------------------------- | ---------------- | -------------------------------------------- |
| `global_config_set`        | `new_data: dict` | –ó–∞–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∑–Ω–∞—á–µ–Ω–∏—è |
| `global_config_get`        | `new_result`     | –ó–∞–º–µ–Ω—è–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ                 |
| `global_config_get_all`    | `new_result`     | –ó–∞–º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π   |
| `global_config_get_match`  | `new_result`     | –ó–∞–º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∏—Å–∫–∞ –ø–æ —à–∞–±–ª–æ–Ω—É         |
| `global_config_start`      | ‚Äî                | –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞                            |
| `global_config_stop`       | ‚Äî                | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞                         |
| `global_config_set_status` | ‚Äî                | –°–∏–≥–Ω–∞–ª —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Ç–∞—Ç—É—Å–∞                     |

### üîπ TaskExecutor

| –¢—Ä–∏–≥–≥–µ—Ä                                | Return                        | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                        |
| -------------------------------------- | ----------------------------- | ----------------------------------------------------------------- |
| `task_executor_args_replace`           | `new_args: Tuple[list, dict]` | –ó–∞–º–µ–Ω—è–µ—Ç args –∏ kwargs –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è                              |
| `task_executor_middlewares_execute`    | ‚Äî                             | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∑–∞–¥–∞—á–∏ —Å –º–∏–¥–ª–≤–∞—Ä–∞–º–∏                  |
| `task_executor_run_task`               | `new_result`                  | –ó–∞–º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏                              |
| `task_executor_run_task_gen`           | `new_results`                 | –ó–∞–º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞                                    |
| `task_executor_run_task_trigger_error` | `new_result`                  | –ó–∞–º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è `TaskPluginTriggerError` |
| `task_executor_decode`                 | `new_result`                  | –ó–∞–º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞                       |

### üîπ Starter

| –¢—Ä–∏–≥–≥–µ—Ä         | Return | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                   |
| --------------- | ------ | ---------------------------- |
| `starter_start` | ‚Äî      | –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Starter    |
| `starter_stop`  | ‚Äî      | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ Starter |

### üîπ Storage

| –¢—Ä–∏–≥–≥–µ—Ä                         | Return                    | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                     |
| ------------------------------- | ------------------------- | ---------------------------------------------- |
| `storage_add`                   | `new_data`                | –ó–∞–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∑–∞–¥–∞—á–∏    |
| `storage_get`                   | `new_result: Task`        | –ó–∞–º–µ–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∑–∞–¥–∞—á–∏            |
| `storage_get_all`               | `new_results: List[Task]` | –ó–∞–º–µ–Ω—è–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á               |
| `storage_update`                | `new_kw: dict`            | –ó–∞–º–µ–Ω—è–µ—Ç kwargs –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏                 |
| `storage_remove_finished_task`  | ‚Äî                         | –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏                    |
| `storage_start`                 | ‚Äî                         | –ó–∞–ø—É—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞                              |
| `storage_stop`                  | ‚Äî                         | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞                           |
| `storage_add_process`           | `new_data`                | –ó–∞–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ |
| `storage_running_older_tasks`   | `new_data`                | –ó–∞–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–¥–∞—á       |
| `storage_delete_finished_tasks` | ‚Äî                         | –û—á–∏—Å—Ç–∫–∞ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∑–∞–¥–∞—á                      |
| `storage_flush_all`             | ‚Äî                         | –°–±—Ä–æ—Å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞                                |

### üîπ Worker

| –¢—Ä–∏–≥–≥–µ—Ä                       | Return          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                          |
| ----------------------------- | --------------- | ------------------------------------------------------------------- |
| `worker_execute_before`       | `new_model`     | –ó–∞–º–µ–Ω—è–µ—Ç –º–æ–¥–µ–ª—å –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º                                   |
| `worker_execute_after`        | ‚Äî               | –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏                                  |
| `worker_add`                  | `new_data`      | –ó–∞–º–µ–Ω—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏                                  |
| `worker_start`                | ‚Äî               | –ó–∞–ø—É—Å–∫ –≤–æ—Ä–∫–µ—Ä–∞                                                      |
| `worker_stop`                 | ‚Äî               | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤–æ—Ä–∫–µ—Ä–∞                                                   |
| `worker_run_task_before`      | `new_data`      | –ó–∞–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏                                |
| `worker_task_error_retry`     | `plugin_result` | –ó–∞–º–µ–Ω—è–µ—Ç TaskStatusErrorSchema –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–µ                          |
| `worker_remove_finished_task` | `new_data`      | –ó–∞–º–µ–Ω—è–µ—Ç TaskPrioritySchema –∏ TaskStatus... –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –æ—á–µ—Ä–µ–¥–∏ |

---

–≠—Ç–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞–≥–∏–Ω–æ–≤, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–π
–ª–æ–≥–∏–∫–∏ –ø–æ–≤–µ—Ä—Ö QTasks.
